<!DOCTYPE html>
<html>
  <head>
    <title>Cannon Game</title>
    <style>
      canvas {
        border: 1px solid black;
      }
      .bar {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 20px;
        background-color: gray;
      }
      .timer {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 24px;
      }
    </style>
  </head>
  <body>
    <div class="bar"></div>
    <div class="timer">Time: 10</div>
    <canvas id="canvas" width="600" height="400"></canvas>

    <script>
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');

      const cannon = {
        x: canvas.width / 2,
        y: canvas.height - 20,
        width: 50,
        height: 20,
        speed: 10
      };

      const bullet = {
        x: 0,
        y: 0,
        radius: 5,
        speed: 20
      };

      let targetsHit = 0;
      const totalTargets = 7;
      const targets = [];

      for (let i = 0; i < totalTargets; i++) {
        targets.push({
          x: Math.floor(Math.random() * (canvas.width - 50)),
          y: Math.floor(Math.random() * (canvas.height - 50)),
          width: 50,
          height: 50,
          speedX: Math.random() * 10,
          speedY: Math.random() * 10,
          hit: false
        });
      }

      const cannonFireSound = new Audio('cannon_fire.mp3');
      const targetHitSound = new Audio('target_hit.mp3');
      const blockerHitSound = new Audio('blocker_hit.mp3');

      function drawCannon() {
        ctx.fillRect(cannon.x, cannon.y, cannon.width, cannon.height);
      }

      function drawBullet() {
        ctx.beginPath();
        ctx.arc(bullet.x, bullet.y, bullet.radius, 0, Math.PI * 2);
        ctx.fill();
      }

      function drawTargets() {
        targets.forEach(function(target) {
          if (!target.hit) {
            ctx.fillRect(target.x, target.y, target.width, target.height);
          }
        });
      }

      document.addEventListener('keydown', function(event) {
        if (event.code === 'ArrowLeft') {
          cannon.x -= cannon.speed;
        } else if (event.code === 'ArrowRight') {
          cannon.x += cannon.speed;
        } else if (event.code === 'Space') {
          if (bullet.y <= 0) {
            bullet.x = cannon.x + cannon.width / 2;
            bullet.y = cannon.y;
            cannonFireSound.play();
          }
        }
      });

      let timeLeft = 10;
      const timerElement = document.querySelector('.timer');

      function update() {
        if (timeLeft === 0 || targetsHit === totalTargets) {
          clearInterval(intervalId);
          return;
        }

        timeLeft--;
        timerElement.innerText = `Time: ${timeLeft}`;

        if (bullet.y > 0) {
          bullet.y -= bullet.speed;
        } else {
          bullet.x = 0;
          bullet.y = 0;
        }

        targets.forEach(function(target) {
  if (!target.hit && bullet.x >= target.x && bullet.x <= target.x + target.width &&
      bullet.y >= target.y && bullet.y <= target.y + target.height) {
    target.hit = true;
    score++;
    bullet.x = 0;
    bullet.y = 0;
    target.x = Math.random() * (canvas.width - target.width);
    target.y = Math.random() * (canvas.height / 2 - target.height);
    target.speedX = Math.random() * 10;
    target.speedY = Math.random() * 10;
    targetHitSound.play();
  }
});
  </script>
  </body>
</html>

